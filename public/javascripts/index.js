"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t){var o={};for(var n in t)if(a(t[n])){o[n]=[];for(var i in t[n])o[n].push(t[n][i])}else t.hasOwnProperty(n)&&(o[n]="object"==_typeof(t[n])?e(t[n]):t[n]);return o}function o(t,o,n,i){i&&(t=e(t)),n=n||this;for(var a in t)if(!t.hasOwnProperty(a)||0==o.call(n,t[a],a))break}function n(t,e,i,l){var s;if(a(e))o(e,function(e,o){i||rbracket.test(t)?l(t,e):n(t+"["+("object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!=e?o:"")+"]",e,i,l)});else if(i||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))l(t,e);else for(s in e)n(t+"["+s+"]",e[s],i,l)}var i=function(t,e,o){var n=function(t,e,o){var n=this,i=function o(){var n=this;this.isout||setTimeout(function(){t(),o.call(n)},e)};setTimeout(function(){i.call(n)},o||0)};return new n(t,e,o)};i.cancel=function(t){t.isout=!0,t=void 0};var a=function(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Array==t.constructor},l=new XMLHttpRequest,s=function(t,e){var i,l=[],s=function(t,e){var o="function"==typeof e?e():e;l[l.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==o?"":o)};if(a(t)||t.jquery&&!jQuery.isPlainObject(t))o(t,function(t){s(t.name,t.value)});else for(i in t)n(i,t[i],e,s);return l.join("&")},r=function(t){var e=!t.async||!1;l.open(t.type||"GET",t.url,e),l.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8"),l.send(s(t.data||{})),l.onreadystatechange=function(){if(4===l.readyState&&200===l.status&&t.success&&t.success(JSON.parse(l.responseText)),404===l.status)throw"地址没有找到!"}},c=$,u=function(){this.container=document.querySelector(".xly-layer"),this.bg=this.container.querySelector(".lay-bg"),this.modal=this.container.querySelector(".lay-modal"),this.text=this.container.querySelector(".lay-textContent")};u.prototype={show:function(t,e){var o=this;this.text.textContent=t,this.container.style.display="flex",this.modal.style.left=this.container.offsetWidth/2-this.modal.offsetWidth/2+"px",this.modal.style.transition="0s",this.modal.style.top=this.container.offsetHeight/2+100+"px",this.modal.style.transform="scale(0.5)",setTimeout(function(){o.modal.style.transition=".4s",o.modal.style.transform="scale(1)",o.modal.style.top=o.container.offsetHeight/2-o.modal.offsetHeight/2+"px",o.container.className="xly-layer in",setTimeout(function(){o.modal.style.transform="scale(0.5)",o.modal.style.top=o.container.offsetHeight/2-100+"px",o.container.className="xly-layer out",setTimeout(function(){o.container.style.display="none",e&&e()},400)},2e3)},10)}};var f=function(){function t(){_classCallCheck(this,t),console.log("你好"),console.log("执行了");document.querySelector("header.header")}return _createClass(t,[{key:"home",value:function(){function t(t){var e=document.querySelectorAll(t);return e.length>1?e:e[0]}function e(){l.scrollTop>=50&&d-l.scrollTop>=50?(f.removeClass("fixb"),f.addClass("fixt")):d-l.scrollTop<50?(f.removeClass("fixt"),f.addClass("fixb")):(l.scrollTop<50||d-l.scrollTop<50)&&(f.removeClass("fixt"),f.removeClass("fixb"))}function n(){p.className="login-dialog-container out",setTimeout(function(){p.style.display="none"},400)}console.clear();var i=c(".pageload-img"),a=jQuery;window.onload=function(){i.fadeOut(500),setTimeout(function(){i.remove()},500)};var l=a("body")[0],s=a(".background-imgA"),f=a(".page-container .left_bg"),d=l.scrollHeight-s[0].offsetHeight;e(),window.onscroll=e;var y=t(".tab-btn"),m=t(".login-modal form");o(y,function(t,e){t.addEventListener("click",function(){o(m,function(t,e){y[e].className="tab-btn",t.style.display="none"}),m[e].style.display="block",y[e].className="tab-btn active"})});var p=t(".login-dialog-container"),g=t(".login-bg"),h=t("#login-btn"),v=t(".login-dialog-container .close-dialog");h&&h.addEventListener("click",function(){p.style.display="flex",setTimeout(function(){p.className="login-dialog-container in"},10)}),g.addEventListener("click",n),v.addEventListener("click",n);var b=t(".login-form"),w=t(".login-form .login-btn"),x=new u;w.addEventListener("click",function(){console.log(b.username.value,b.password.value),r({type:"POST",url:"login",data:{username:b.username.value,pwd:b.password.value,autologin:b.autologin.checked},success:function(t){t.status?x.show("登录成功!^_^",function(){location.reload()}):x.show("用户名或密码错误!T T")}})})}},{key:"newpost",value:function(){console.clear(),wangEditor.config.printLog=!1;var t=new wangEditor("editor-trigger");t.config.uploadImgUrl="/editorimg",t.config.uploadParams={},t.config.uploadHeaders={},t.config.emotionsShow="value",t.onchange=function(){console.log(this.$txt.html())},t.create();var e=$("#subPost"),o=new u;e.on("click",function(){var e={title:$("#post-title").val(),content:t.$txt.html()};console.log(e),r({type:"POST",url:"/newpost",data:e,success:function(t){t.status?o.show(t.msg,function(){location.reload()}):o.show(t.msg)}})})}}]),t}(),d=new f,y=document.querySelector("[y_ctrl]");y&&(y=y.getAttribute("y_ctrl")),d[y]&&d[y]()}(window);