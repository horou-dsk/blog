"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t){var n={};for(var o in t)if(a(t[o])){n[o]=[];for(var i in t[o])n[o].push(t[o][i])}else t.hasOwnProperty(o)&&(n[o]="object"==_typeof(t[o])?e(t[o]):t[o]);return n}function n(t,n,o,i){i&&(t=e(t)),o=o||this;for(var a in t)if(!t.hasOwnProperty(a)||0==n.call(o,t[a],a))break}function o(t,e,i,l){var s;if(a(e))n(e,function(e,n){i||rbracket.test(t)?l(t,e):o(t+"["+("object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!=e?n:"")+"]",e,i,l)});else if(i||"object"!==("undefined"==typeof e?"undefined":_typeof(e)))l(t,e);else for(s in e)o(t+"["+s+"]",e[s],i,l)}var i=function(t,e,n){var o=function(t,e,n){var o=this,i=function n(){var o=this;this.isout||setTimeout(function(){t(),n.call(o)},e)};setTimeout(function(){i.call(o)},n||0)};return new o(t,e,n)};i.cancel=function(t){t.isout=!0,t=void 0};var a=function(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Array==t.constructor},l=new XMLHttpRequest,s=function(t,e){var i,l=[],s=function(t,e){var n="function"==typeof e?e():e;l[l.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(a(t)||t.jquery&&!jQuery.isPlainObject(t))n(t,function(t){s(t.name,t.value)});else for(i in t)o(i,t[i],e,s);return l.join("&")},r=function(t){var e=!t.async||!1;l.open(t.type||"GET",t.url,e),l.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8"),l.send(s(t.data||{})),l.onreadystatechange=function(){if(4===l.readyState&&200===l.status&&t.success&&t.success(JSON.parse(l.responseText)),404===l.status)throw"地址没有找到!"}},c=$,u=function(){this.container=document.querySelector(".xly-layer"),this.bg=this.container.querySelector(".lay-bg"),this.modal=this.container.querySelector(".lay-modal"),this.text=this.container.querySelector(".lay-textContent")};u.prototype={show:function(t,e){var n=this;this.text.textContent=t,this.container.style.display="flex",this.modal.style.left=this.container.offsetWidth/2-this.modal.offsetWidth/2+"px",this.modal.style.transition="0s",this.modal.style.top=this.container.offsetHeight/2+100+"px",this.modal.style.transform="scale(0.5)",setTimeout(function(){n.modal.style.transition=".4s",n.modal.style.transform="scale(1)",n.modal.style.top=n.container.offsetHeight/2-n.modal.offsetHeight/2+"px",n.container.className="xly-layer in",setTimeout(function(){n.modal.style.transform="scale(0.5)",n.modal.style.top=n.container.offsetHeight/2-100+"px",n.container.className="xly-layer out",setTimeout(function(){n.container.style.display="none",e&&e()},400)},2e3)},10)}};var f=function(){function t(){_classCallCheck(this,t),console.log("你好"),console.log("执行了");document.querySelector("header.header")}return _createClass(t,[{key:"home",value:function(){function t(t){var e=document.querySelectorAll(t);return e.length>1?e:e[0]}function e(){l.className="login-dialog-container out",setTimeout(function(){l.style.display="none"},400)}console.clear();var o=c(".pageload-img");c(document).ready(function(){o.fadeOut(500),setTimeout(function(){o.remove()},500)}),console.log("主页!");var i=t(".tab-btn"),a=t(".login-modal form");n(i,function(t,e){t.addEventListener("click",function(){n(a,function(t,e){i[e].className="tab-btn",t.style.display="none"}),a[e].style.display="block",i[e].className="tab-btn active"})});var l=t(".login-dialog-container"),s=t(".login-bg"),f=t("#login-btn"),d=t(".login-dialog-container .close-dialog");f&&f.addEventListener("click",function(){l.style.display="flex",setTimeout(function(){l.className="login-dialog-container in"},10)}),s.addEventListener("click",e),d.addEventListener("click",e);var y=t(".login-form"),m=t(".login-form .login-btn"),p=new u;m.addEventListener("click",function(){console.log(y.username.value,y.password.value),r({type:"POST",url:"login",data:{username:y.username.value,pwd:y.password.value,autologin:y.autologin.checked},success:function(t){t.status?p.show("登录成功!^_^",function(){location.reload()}):p.show("用户名或密码错误!T T")}})})}},{key:"newpost",value:function(){console.clear(),wangEditor.config.printLog=!1;var t=new wangEditor("editor-trigger");t.config.uploadImgUrl="/editorimg",t.config.uploadParams={},t.config.uploadHeaders={},t.config.emotionsShow="value",t.onchange=function(){console.log(this.$txt.html())},t.create();var e=$("#subPost"),n=new u;e.on("click",function(){var e={title:$("#post-title").val(),content:t.$txt.html()};console.log(e),r({type:"POST",url:"/newpost",data:e,success:function(t){t.status?n.show(t.msg,function(){location.reload()}):n.show(t.msg)}})})}}]),t}(),d=new f,y=document.querySelector("[y_ctrl]");y&&(y=y.getAttribute("y_ctrl")),d[y]&&d[y]()}(window);